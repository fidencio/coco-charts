# Kata runtime configuration for s390x (IBM Z) architecture
# Usage: helm install coco oci://ghcr.io/.../confidential-containers -f https://raw.githubusercontent.com/confidential-containers/charts/main/values/kata-s390x.yaml
#
# This file only overrides architecture-specific shims and mappings.
# For the full list of configurable options and their descriptions,
# see: values.yaml in the chart root
#
architecture: s390x

kata-as-coco-runtime:
  imagePullPolicy: Always
  k8sDistribution: k8s
  debug: false

  # Snapshotter configuration
  snapshotter:
    setup: ["nydus"]

  # TEE (Trusted Execution Environment) shims configuration
  # Only enable the shims we want to expose, explicitly disable all others
  shims:
    # Enabled shims - TEE shims we want to expose
    qemu-se:
      enabled: true
      supportedArches:
        - s390x
      allowedHypervisorAnnotations: []
      containerd:
        snapshotter: nydus
        forceGuestPull: false
      crio:
        guestPull: true
      agent:
        httpsProxy: ""
        noProxy: ""

    qemu-se-runtime-rs:
      enabled: true
      supportedArches:
        - s390x
      allowedHypervisorAnnotations: []
      containerd:
        snapshotter: nydus
        forceGuestPull: false
      crio:
        guestPull: true
      agent:
        httpsProxy: ""
        noProxy: ""

    qemu-coco-dev:
      enabled: true
      supportedArches:
        - amd64
        - s390x
      allowedHypervisorAnnotations: []
      containerd:
        snapshotter: nydus
        forceGuestPull: false
      crio:
        guestPull: true
      agent:
        httpsProxy: ""
        noProxy: ""

    qemu-coco-dev-runtime-rs:
      enabled: true
      supportedArches:
        - amd64
        - s390x
      allowedHypervisorAnnotations: []
      containerd:
        snapshotter: nydus
        forceGuestPull: false
      crio:
        guestPull: true
      agent:
        httpsProxy: ""
        noProxy: ""

    # Kata runtimes that are not for TEE
    clh:
      enabled: false

    cloud-hypervisor:
      enabled: false

    dragonball:
      enabled: false

    fc:
      enabled: false

    qemu:
      enabled: false

    qemu-runtime-rs:
      enabled: false

  # RuntimeClasses configuration
  runtimeClasses:
    enabled: true
    createDefault: false
    defaultName: "kata"

  # Default shim per architecture
  defaultShim:
    s390x: qemu-se
